!
!debug bgp neighbor
!
vni 10
!
int lo
 ip address 10.10.10.1/32
!
int r1-eth0
 ip address 192.168.1.1/24
!
router bgp 65001
 no bgp ebgp-requires-policy
 no bgp network import-check
 neighbor 192.168.1.2 remote-as external
 neighbor 192.168.1.2 timers 1 3
 neighbor 192.168.1.2 timers connect 1
 !
 address-family ipv4 unicast
  no neighbor 192.168.1.2 activate
  network 10.0.0.0/24
  network 10.0.1.0/24
  network 10.0.2.0/24
 exit-address-family
 !
 address-family l2vpn evpn
  neighbor 192.168.1.2 activate
  neighbor 192.168.1.2 route-map r2 out
  advertise-all-vni
  advertise ipv4 unicast
 exit-address-family
!
route-map r2 permit 10
 match ip address prefix-list PF-NET1
!
route-map r2 permit 20
 match ip address prefix-list PF-NET2
 match evpn route-type prefix
!
route-map r3 permit 30
 match ip address prefix-list PF-NET3
 match evpn vni 10
!
ip prefix-list PF-NET1 permit 10.0.0.0/24
!
ip prefix-list PF-NET2 permit 10.0.1.0/24
!
ip prefix-list PF-NET3 permit 10.0.2.0/24
!
